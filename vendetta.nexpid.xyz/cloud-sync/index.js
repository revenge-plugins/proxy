(function(I,se,D,A,O,M,n,d,B,l,v,_,b,L,ce){"use strict";function j(){const e=M.constants.GITHUB;return"bunny"in window?"Bunny":e.includes("vendetta-mod")?"Vendetta":e.includes("revenge-mod")?"Revenge":"UnknownClient"}function ct(){return"PROXY_PREFIXES"in M.constants&&Array.isArray(M.constants.PROXY_PREFIXES)?M.constants.PROXY_PREFIXES:[M.constants.PROXY_PREFIX]}const lt=d.find(function(e){return e?.WebView&&!e.default}).WebView;d.findByProps("SvgXml"),d.findByProps("isJoi"),d.findByProps("useSharedValue");const G=n.ReactNative.NativeModules.DCDFileManager??n.ReactNative.NativeModules.RTNFileManager,ut=n.ReactNative.NativeModules.BundleUpdaterManager,ft=n.ReactNative.NativeModules.MMKVManager,Z=n.ReactNative.NativeModules.DCDSoundManager,S=n.ReactNative.NativeModules.RNFSManager,z=function(e){return e.startsWith("file://")?e.slice(7):e},le=function(e){if(typeof e=="string"){if(["utf8","ascii","base64"].includes(e))return{encoding:e};throw new Error(`Invalid encoding type "${String(e)}"`)}else return e||{encoding:"utf8"}},dt=function(e,t,r){const a=le(t);return r(z(e)).then(function(i){let c;return a.encoding==="utf8"?c=Buffer.from(i,"base64").toString("utf8"):a.encoding==="ascii"?c=Buffer.from(i,"base64").toString("ascii"):a.encoding==="base64"&&(c=i),c})},Ae=function(e){let t={style:null,path:null};const r=G.getConstants();if(e.startsWith(r.DocumentsDirPath))t={style:"documents",path:e.slice(r.DocumentsDirPath.length+1)};else if(e.startsWith(r.CacheDirPath))t={style:"cache",path:e.slice(r.CacheDirPath.length+1)};else throw new Error(`File path "${String(e)}" is unsupported on versions <211.6 (not a caches/documents path, missing RNFS)`);return t},E={unlink(e){if(S)return S.unlink(z(e)).then(function(){});const t=Ae(e);return G.removeFile(t.style,t.path).then(function(){})},exists(e){return S?S.exists(z(e)):G.fileExists(z(e))},readFile(e,t){if(S)return dt(e,t,S.readFile);{const r=le(t);if(r.encoding==="ascii")throw new Error('Encoding type "ascii" is unsupported on versions <211.6 (missing RNFS)');return G.readFile(e,r.encoding)}},writeFile(e,t,r){const a=le(r);if(!S){if(a.encoding==="ascii")throw new Error('Encoding type "ascii" is unsupported on versions <211.6 (missing RNFS)');const c=Ae(e);return G.writeFile(c.style,c.path,t,a.encoding).then(function(){})}let i;return a.encoding==="utf8"?i=Buffer.from(t,"utf8").toString("base64"):a.encoding==="ascii"?i=Buffer.from(t,"ascii").toString("base64"):a.encoding==="base64"&&(i=t),S.writeFile(z(e),i,a)},mkdir(e){if(!S)throw new Error("Function 'mkdir' is unsupported on versions <211.6 (missing RNFS)");return S.mkdir(z(e),{}).then(function(){})},MainBundlePath:S?.RNFSMainBundlePath,get CachesDirectoryPath(){return S?.RNFSCachesDirectoryPath??G.getConstants().CacheDirPath},ExternalCachesDirectoryPath:S?.RNFSExternalCachesDirectoryPath,get DocumentDirectoryPath(){return S?.RNFSDocumentDirectoryPath??G.getConstants().DocumentsDirPath},DownloadDirectoryPath:S?.RNFSDownloadDirectoryPath,ExternalDirectoryPath:S?.RNFSExternalDirectoryPath,ExternalStorageDirectoryPath:S?.RNFSExternalStorageDirectoryPath,TemporaryDirectoryPath:S?.RNFSTemporaryDirectoryPath,LibraryDirectoryPath:S?.RNFSLibraryDirectoryPath,PicturesDirectoryPath:S?.RNFSPicturesDirectoryPath,FileProtectionKeys:S?.RNFSFileProtectionKeys,RoamingDirectoryPath:S?.RNFSRoamingDirectoryPath,hasRNFS:!!S};function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pt(e,t,r){return t&&Be(e.prototype,t),r&&Be(e,r),e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ht="https://raw.githubusercontent.com/nexpid/RevengePlugins/main/lang/values/",yt=function(){return E.hasRNFS&&E.mkdir(`${E.DocumentDirectoryPath}/vendetta/NexpidLang`)},ue=function(e){return`${E.DocumentDirectoryPath}/vendetta/NexpidLang/${e}.json`},fe=function(e){return`${E.DocumentDirectoryPath}/vendetta/NexpidLang/${e}_etag.txt`};let mt=function(){function e(t){gt(this,e),ee(this,"plugin",void 0),ee(this,"values",void 0),ee(this,"controller",void 0),ee(this,"Values",void 0),this.plugin=t,this.values=null,this.controller=new AbortController,this.load()}return pt(e,[{key:"load",value:async function(){var t=this;const r=async function(){if(await E.exists(ue(t.plugin)))try{t.values=JSON.parse(await E.readFile(ue(t.plugin)))}catch{return}};{const a=await fetch(`${ht}${this.plugin}.json`,{headers:{"cache-control":"public, max-age=20"}});if(!a.ok)return r();yt();const i=await E.exists(fe(this.plugin))&&await E.readFile(fe(this.plugin)),c=a.headers.get("etag");if(!c)return r();if(c!==i){E.writeFile(fe(this.plugin),c);const s=await a.text();E.writeFile(ue(this.plugin),s);try{this.values=JSON.parse(s)}catch{return}}else r()}}},{key:"unload",value:function(){this.controller.abort()}},{key:"format",value:function(t,r){if(!this.values)return String(t);const a=this.values[e.getLang()];if(!a)return String(t);let i=a[String(t)];if(!i)return String(t);const c=i.match(/\$\w+/g)?.map(function(s){return s.slice(1)})??[];for(const s of c)i=i.replace(new RegExp(`\\$${s}`,"g"),String(s in r?r[s]:""));return i}}],[{key:"getLang",value:function(){const t=n.i18n.getLocale()?.replace(/-/g,"_")??"en";return t.startsWith("en_")?"en":t}}]),e}();const xe=Symbol.for("nexpid.vendetta.migrate"),$e=`${E.DocumentDirectoryPath}/vendetta/NexpidMigrate`;async function Rt(){j()==="Vendetta"&&!await E.exists($e)&&!window[xe]&&(window[xe]=!0,B.showConfirmationAlert({title:"Vendetta EOL",content:"Hi there, nexx here! Vendetta was recently discontinued, meaning it could break at any time. I personally recommend that you switch to Revenge - a fork of Vendetta maintained by @palmdevs.",confirmText:"Visit Revenge",onConfirm:function(){return n.url.openURL("https://github.com/Revenge-mod/Revenge#%EF%B8%8F-installing")},onCancel:async function(){return await E.writeFile($e,"dismissed (maisy was here :3)")},cancelText:"I'll pass (hide this popup forever)"}))}const wt=d.findByStoreName("ThemeStore");d.findByProps("triggerHaptic");const ke=d.findByProps("colors","unsafe_rawColors"),St=ke?.internal??ke?.meta,de=d.findByProps("TextStyleSheet").TextStyleSheet,Et=d.findByProps("ActionSheet")?.ActionSheet??d.find(function(e){return e.render?.name==="ActionSheet"}),vt=d.findByProps("openLazy","hideActionSheet"),{openLazy:_t,hideActionSheet:Fe}=vt,{ActionSheetTitleHeader:bt,ActionSheetCloseButton:Nt,ActionSheetContentContainer:Pt}=d.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer");d.findByProps("ActionSheetRow")?.ActionSheetRow,d.findByName("Navigator")??d.findByProps("Navigator")?.Navigator,d.findByProps("getRenderCloseButton")?.getRenderCloseButton??d.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,d.findByProps("popModal","pushModal");const Oe=d.findByProps("Button","ContextMenu","TextInput")??{};function Me(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.theme;return St.resolveSemanticColor(t,e)}function ge(e,t){try{_t(new Promise(function(r){return r({default:e})}),"ActionSheet",t)}catch(r){M.logger.error(r.stack),_.showToast("Got error when opening ActionSheet! Please check debug logs",l.getAssetIDByName("Smal"))}}const{Text:Tt}=v.General;function te(e){let{variant:t,lineClamp:r,color:a,align:i,style:c,onPress:s,getChildren:p,children:f,liveUpdate:R}=e;const[g,h]=n.React.useReducer(function(y){return~y},0);return n.React.useEffect(function(){if(!R)return;const y=new Date().setMilliseconds(1e3);let m;const C=setTimeout(function(){h(),m=setInterval(h,1e3)},y-Date.now());return function(){clearTimeout(C),clearInterval(m)}},[]),n.React.createElement(Tt,{style:[t?de[t]:{},a?{color:Me(b.semanticColors[a])}:{},i?{textAlign:i}:{},c??{}],numberOfLines:r,onPress:s},p?.()??f)}const{View:X,Pressable:Ct}=v.General;function It(e){let{title:t,onPress:r,icon:a}=e;const i=n.stylesheet.createThemedStyleSheet({androidRipple:{color:b.semanticColors.ANDROID_RIPPLE},icon:{height:18,tintColor:b.semanticColors.HEADER_SECONDARY,opacity:.5}}),c=r?Ct:X;return React.createElement(c,{android_ripple:i.androidRipple,disabled:!1,accessibilityRole:"button",onPress:r,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},a&&React.createElement(X,{style:{marginRight:4}},React.createElement(n.ReactNative.Image,{style:i.icon,source:a,resizeMode:"contain"})),React.createElement(te,{variant:"text-sm/semibold",color:"HEADER_SECONDARY"},t))}function ne(e){let{title:t,onTitlePress:r,icon:a,children:i,padding:c}=e;const s=n.stylesheet.createThemedStyleSheet({main:{backgroundColor:b.semanticColors.CARD_PRIMARY_BG,borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(X,{style:{marginHorizontal:16,marginTop:16}},React.createElement(It,{title:t,onPress:r,icon:a}),React.createElement(X,{style:s.main},c?React.createElement(X,{style:{paddingHorizontal:16,paddingVertical:16}},i):i))}const{View:Le}=v.General;function Ge(e){let{addPadding:t}=e;const r=n.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:b.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return React.createElement(Le,{style:[{marginTop:16,marginBottom:16},t&&{marginHorizontal:16}]},React.createElement(Le,{style:r.line}))}const pe="https://cloudsync.nexpid.xyz/",he="1120793656878714913",Ve=function(){return u.host?u.host.endsWith("/")?u.host:`${u.host}/`:pe};var T={get api(){return Ve()},raw:"https://raw.githubusercontent.com/nexpid/RevengePlugins/main/plugins/cloud-sync/",oauth2:{get clientId(){return u.clientId||he},get redirectURL(){return`${Ve()}api/oauth2-response`}}};function Dt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t,r){return Ue()?re=Reflect.construct:re=function(a,i,c){var s=[null];s.push.apply(s,i);var p=Function.bind.apply(a,s),f=new p;return c&&K(f,c.prototype),f},re.apply(null,arguments)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},W(e)}function Bt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function xt(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function $t(e,t){return t&&(kt(t)==="object"||typeof t=="function")?t:Dt(e)}function K(e,t){return K=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},K(e,t)}function kt(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function ye(e){var t=typeof Map=="function"?new Map:void 0;return ye=function(r){if(r===null||!xt(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return re(r,arguments,W(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),K(a,r)},ye(e)}function Ue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ft(e){var t=Ue();return function(){var r=W(e),a;if(t){var i=W(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return $t(this,a)}}const je=d.findByStoreName("UserStore");let H=function(e){Bt(r,e);var t=Ft(r);function r(a){At(this,r);var i;return i=t.call(this,`${a.status}: ${a.message}${a.error?` (${a.error})`:""}`),i.name=i.constructor.name,i}return r}(ye(Error));function x(){return u.auth[je.getCurrentUser()?.id]}async function me(){const e=new Error(o.format("toast.api.unauthorized",{}));let t=x();if(!t)throw e;if(Date.now()>=t.expiresAt){const r=await fetch(`${T.api}api/refresh-access-token?refresh_token=${encodeURIComponent(t.refreshToken)}`);if(r.status!==200)throw new H(await r.json());t=await r.json(),u.auth[je.getCurrentUser().id]=t}return t.accessToken}async function Ot(e){const t=await fetch(`${T.api}api/get-access-token?code=${encodeURIComponent(e)}`);if(t.status===200)return await t.json();throw new H(await t.json())}async function Mt(){if(!x())return;const e=await fetch(`${T.api}api/get-data`,{headers:{authorization:await me()}});if(e.status===200)return await e.json();throw new H(await e.json())}async function ze(e){if(!x())return;const t=await fetch(`${T.api}api/sync-data`,{method:"POST",headers:{authorization:await me(),"content-type":"application/json"},body:JSON.stringify(e)});if(t.status===200)return await t.json();throw new H(await t.json())}async function Lt(){if(!x())return;const e=await fetch(`${T.api}api/delete-data`,{method:"DELETE",headers:{authorization:await me()}});if(e.status===200)return await e.json();throw new H(await e.json())}async function Gt(e){if(!x())return;const t=await fetch("https://hst.sh/documents",{method:"POST",body:e});if(t.status===200)return await t.json();throw new H(await t.json())}const{pushModal:Vt,popModal:Ut}=d.findByProps("pushModal","popModal"),jt=d.findByName("OAuth2AuthorizeModal"),zt=d.findByStoreName("UserStore");function Ht(){Vt({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:jt,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:T.oauth2.clientId,redirectUri:T.oauth2.redirectURL,scopes:["identify"],responseType:"code",permissions:0n,cancelCompletesFlow:!1,callback:async function(e){let{location:t}=e;if(t)try{const r=new URL(t).searchParams.get("code"),a=await Ot(r);u.auth[zt.getCurrentUser().id]=a,Pe(),_.showToast(o.format("toast.oauth.authorized",{}),l.getAssetIDByName("Check"))}catch(r){_.showToast(String(r),l.getAssetIDByName("Small"))}},dismissOAuthModal:function(){return Ut("oauth2-authorize")}},closable:!0}})}async function He(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=Math.floor(Math.random()*1e6),a=await Promise.resolve(new Promise(function(c){return Z.prepare(e,"notification",r,function(s,p){return c(p?.duration??t)})}));let i=null;return{play(){i&&(clearTimeout(i),i=null,Z.stop(r)),Z.play(r),i=setTimeout(function(){i=null,Z.stop(r)},a)}}}let ae=!1,Re;const we=[];function Xt(){we.length=0,Re?.()}function V(e,t){we.push([e,t]),Re?.()}const Wt={themes:"#42f5a4",plugins:"#4290f5",importer:"#e6f542"},Xe=n.stylesheet.createThemedStyleSheet({text:{fontFamily:n.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:b.semanticColors.TEXT_NORMAL,marginHorizontal:12,marginTop:24}}),Kt=function(){const[e,t]=n.React.useReducer(function(a){return~a},0);Re=t;const r=n.React.useRef();return n.React.useEffect(function(){return ae=!0,function(){ae=!1}},[]),n.React.createElement(n.ReactNative.ScrollView,{style:{flex:1},ref:r,onContentSizeChange:function(){return r.current.scrollToEnd({animated:!0})}},n.React.createElement(n.ReactNative.Text,{style:Xe.text},we.map(function(a){let[i,c]=a;return[n.React.createElement(n.ReactNative.Text,{style:[Xe.text,{color:Wt[i]}]},"[",o.format(`log.${i}`,{}),"]:"),` ${c}
`]})))};function Jt(e){e.push("VendettaCustomPage",{render:Kt,title:o.format("page.import_logs",{})})}async function We(){const e={themes:[],plugins:[]};for(const t of Object.values(D.plugins)){const r=u.pluginSettings[t.id];if(r?.syncPlugin===!1)continue;const a=r?.syncStorage===!1?{}:await A.createMMKVBackend(t.id).get();e.plugins.push({id:t.id,enabled:t.enabled,options:a})}for(const t of Object.values(O.themes))e.themes.push({id:t.id,enabled:t.selected});return e}let ie;function Ke(e){ie=e}const P=function(e){return e!==1?o.format("combo.plugins.plural",{count:e}):o.format("combo.plugins",{})};async function Yt(e,t){if(!e)return;ie?.(!0);const r=[...e.sync.plugins.filter(function(s){return!D.plugins[s.id]&&!Y(s.id)&&q(s.id)&&t.unproxiedPlugins}),...e.sync.plugins.filter(function(s){return!D.plugins[s.id]&&Y(s.id)&&q(s.id)&&t.plugins})],a=e.sync.themes.filter(function(s){return!O.themes[s.id]&&t.themes});if(!r[0]&&!a[0])return ie?.(!1),_.showToast(o.format("toast.sync.no_import",{}),l.getAssetIDByName("Small"));Xt(),V("importer",o.format("log.import.start.combo",{plugins:P(r.length),themes:P(a.length)})),ae||_.showToast(o.format("log.import.start.combo",{plugins:P(r.length),themes:P(a.length)}),l.getAssetIDByName("toast_image_saved"));const i={plugins:0,themes:0,fPlugins:0,fThemes:0};await Promise.all([...r.map(function(s){return new Promise(function(p){ft.setItem(s.id,JSON.stringify(s.options)),D.installPlugin(s.id,s.enabled).then(function(){i.plugins++,V("plugins",o.format("log.import.plugin.success",{name:s.id}))}).catch(function(f){i.fPlugins++,V("plugins",o.format("log.import.plugin.fail",{name:s.id,error:f}))}).finally(p)})}),...a.map(function(s){return new Promise(function(p){return O.installTheme(s.id).then(function(){i.themes++,V("themes",o.format("log.import.theme.success",{name:s.id}))}).catch(function(f){i.fThemes++,V("themes",o.format("log.import.theme.fail",{name:s.id,error:f}))}).finally(p)})})]),ae||_.showToast(o.format("log.import.total",{plugins:P(i.plugins),themes:P(i.themes)}),l.getAssetIDByName("Check"));const c=O.themes[a.find(function(s){return s.enabled})?.id];c&&(V("themes",o.format("log.import.select_theme",{theme:c.id})),await A.createFileBackend("vendetta_theme.json").set(Object.assign(c,{selected:!0})),await function(){return new Promise(function(s){return B.showConfirmationAlert({title:o.format("alert.change_theme.title",{}),content:o.format("alert.change_theme.body",{}),confirmText:o.format("alert.change_theme.confirm",{}),confirmColor:"red",onConfirm:function(){ut.reload(),s()},cancelText:o.format("alert.change_theme.cancel",{}),onCancel:s,isDismissable:!0})})}()),V("importer",i.fPlugins||i.fThemes?o.format("log.import.result.fail",{plugins:P(i.plugins),themes:P(i.themes),failed_plugins:P(i.fPlugins),failed_themes:P(i.fThemes)}):o.format("log.import.result.success",{plugins:P(i.plugins),themes:P(i.themes)})),ie?.(!1)}var qt=`<!doctype html>
<html></html>
<script>
  const RNWV = window.ReactNativeWebView;

  const stringToBuffer = (string) => new TextEncoder().encode(string);
  const bufferToString = (buffer) => new TextDecoder().decode(buffer);

  const keyCache = {};
  const getKey = async (raw) => {
    if (keyCache[raw]) return keyCache[raw];

    const pkey = await crypto.subtle.importKey(
      "raw",
      stringToBuffer(raw),
      { name: "PBKDF2" },
      false,
      ["deriveKey"],
    );
    const key = await crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: new Uint8Array(16),
        iterations: 100000,
        hash: "SHA-256",
      },
      pkey,
      { name: "AES-GCM", length: 256 },
      false,
      ["encrypt", "decrypt"],
    );
    keyCache[raw] = key;
    return key;
  };

  window.addEventListener("message", async (ev) => {
    const { action, data, key, tracker } = ev.data;
    if (!action || !data || !key || !tracker) return;

    try {
      if (action === "encrypt") {
        const iv = crypto.getRandomValues(new Uint8Array(12));
        const ret = await window.crypto.subtle.encrypt(
          {
            name: "AES-GCM",
            iv,
          },
          await getKey(key),
          stringToBuffer(data),
        );
        return RNWV.postMessage(
          JSON.stringify({
            tracker,
            data: btoa(
              String.fromCharCode
                .apply(null, iv)
                .concat(String.fromCharCode.apply(null, new Uint8Array(ret))),
            ),
          }),
        );
      } else if (action === "decrypt") {
        const raw = atob(data);
        const iv = new Uint8Array(
          raw
            .slice(0, 12)
            .split("")
            .map((x) => x.charCodeAt(0)),
        );
        const dt = new Uint8Array(
          raw
            .slice(12)
            .split("")
            .map((x) => x.charCodeAt(0)),
        );

        const ret = await window.crypto.subtle.decrypt(
          {
            name: "AES-GCM",
            iv,
          },
          await getKey(key),
          dt,
        );
        return RNWV.postMessage(
          JSON.stringify({ tracker, data: bufferToString(ret) }),
        );
      }
    } catch (e) {
      return RNWV.postMessage(
        JSON.stringify({ tracker, error: e.message ?? \`\${e}\` }),
      );
    }
  });
<\/script>`;let J;const Se={},Je=function(){return Math.floor(Math.random()*1e36).toString(36)},Ye=function(e){return J?.injectJavaScript(`window.postMessage(${JSON.stringify(e)})`)};async function Qt(e,t){if(!J)return null;const r=Je();return new Promise(function(a,i){Se[r]=function(c){return"error"in c?i(c.error):a(c.data)},Ye({action:"encrypt",data:e,key:t,tracker:r})})}async function Zt(e,t){if(!J)return null;const r=Je();return new Promise(function(a,i){Se[r]=function(c){return"error"in c?i(c.error):a(c.data)},Ye({action:"decrypt",data:e,key:t,tracker:r})})}function en(){return n.React.useEffect(function(){return function(){return J=void 0}},[]),n.React.createElement(lt,{ref:function(e){return J=e},source:{html:qt,baseUrl:"https://localhost"},style:{display:"none",opacity:0},onMessage:function(e){let{nativeEvent:{data:t}}=e,r;try{r=JSON.parse(t)}catch{return}Se[r.tracker]?.(r)}})}const{View:tn,Text:qe}=v.General,Qe=n.stylesheet.createThemedStyleSheet({count:{...de["text-lg/bold"],color:b.semanticColors.TEXT_NORMAL,textAlign:"center"},subtitle:{...de["text-md/medium"],color:b.semanticColors.TEXT_MUTED,textAlign:"center"}});function Ze(e){let{subtitle:t,count:r}=e;return React.createElement(tn,{style:{alignItems:"center",justifyContent:"center",marginHorizontal:16}},React.createElement(qe,{style:Qe.count},r),React.createElement(qe,{style:Qe.subtitle},o.format(t,{})))}function nn(e){let{onPress:t,onLongPress:r,icon:a,style:i,destructive:c,color:s}=e;const p=n.stylesheet.createThemedStyleSheet({headerStyleIcon:{width:24,height:24,marginRight:10,tintColor:b.semanticColors.HEADER_PRIMARY},cardStyleIcon:{width:22,height:22,marginLeft:5,tintColor:b.semanticColors.INTERACTIVE_NORMAL},destructiveIcon:{tintColor:b.semanticColors.TEXT_DANGER}});return React.createElement(n.ReactNative.TouchableOpacity,{onPress:t,onLongPress:r},React.createElement(n.ReactNative.Image,{style:[typeof i=="string"?i==="header"?p.headerStyleIcon:p.cardStyleIcon:i,c&&p.destructiveIcon,s&&{tintColor:s}].filter(function(f){return!!f}),source:a}))}const{FormSwitchRow:et}=v.Forms;function rn(){const[e,t]=n.React.useState(""),[,r]=n.React.useReducer(function(c){return~c},0);n.React.useEffect(function(){t("")},[]),A.useProxy(u);const a=n.NavigationNative.useNavigation(),i=a.addListener("focus",function(){i(),a.setOptions({title:o.format("page.plugin_settings.title",{}),headerRight:function(){return n.React.createElement(nn,{onPress:function(){return B.showConfirmationAlert({title:o.format("alert.plugin_settings_revert.title",{}),content:o.format("alert.plugin_settings_revert.body",{}),confirmText:o.format("alert.plugin_settings_revert.confirm",{}),confirmColor:"red",onConfirm:function(){return u.pluginSettings={}}})},icon:l.getAssetIDByName("ic_message_delete"),style:"header"})}})});return n.React.createElement(n.ReactNative.FlatList,{ListHeaderComponent:n.React.createElement(v.Search,{style:{marginBottom:10},onChangeText:function(c){return t(c.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:Object.entries(D.plugins).filter(function(c){return c[1].manifest.name?.toLowerCase().includes(e)}),renderItem:function(c){let{item:[s,p]}=c;const f=u.pluginSettings[s]??{syncPlugin:!0,syncStorage:!0},R=function(){f.syncPlugin===!0&&f.syncStorage===!0?delete u.pluginSettings[s]:u.pluginSettings[s]=f,r()};return n.React.createElement(v.Summary,{label:p.manifest.name,icon:p.manifest.vendetta.icon??":3"},n.React.createElement(et,{label:o.format("page.plugin_settings.sync_plugin",{}),onValueChange:function(){f.syncPlugin=!f.syncPlugin,R()},value:f.syncPlugin}),n.React.createElement(et,{label:o.format("page.plugin_settings.sync_plugin_storage",{}),onValueChange:function(){f.syncStorage=!f.syncStorage,R()},value:f.syncStorage}))}})}const{View:an}=v.General;function on(e){const t=n.stylesheet.createThemedStyleSheet({buttonIcon:{width:18,height:18}}),{variant:r,size:a,onPress:i,text:c,icon:s,style:p,disabled:f,loading:R}=e;if("Button"in Oe)return React.createElement(Oe.Button,e);{const g={primary:{look:"filled",color:"brand"},"primary-on-blurple":{look:"filled",color:"white"},"primary-alt":{look:"outlined",color:"brand"},"primary-alt-on-blurple":{look:"outlined",color:"white"},secondary:{look:"filled",color:"lightgrey"},"secondary-alt":{look:"filled",color:"grey"},"secondary-input":{look:"filled",color:"#000"},danger:{look:"filled",color:"red"},positive:{look:"filled",color:"green"}}[r];return React.createElement(v.Button,{text:c,renderIcon:function(){return React.createElement(an,{style:{marginRight:8}},typeof s=="object"&&"type"in s?s:React.createElement(n.ReactNative.Image,{source:s,style:[t.buttonIcon,{tintColor:Me(b.semanticColors.WHITE)}],resizeMode:"cover"}))},size:{sm:"small",md:"medium",lg:"large"}[a],look:g.look,color:g.color,onPress:i,style:p,disabled:f,loading:R})}}const{View:sn}=v.General,{FormCheckboxRow:Ee}=v.Forms;function ve(e){let{defOptions:t,save:r=N.save,navigation:a}=e;const i={unproxiedPlugins:r.sync.plugins.filter(function(R){return!D.plugins[R.id]&&!Y(R.id)&&q(R.id)}).length,plugins:r.sync.plugins.filter(function(R){return!D.plugins[R.id]&&Y(R.id)&&q(R.id)}).length,themes:r.sync.themes.filter(function(R){return!O.themes[R.id]}).length},c=[i.unproxiedPlugins,i.plugins,i.themes].reduce(function(R,g){return R+g},0),[s,p]=n.React.useState(t??{unproxiedPlugins:!1,plugins:!!i.plugins,themes:!!i.themes}),f=n.stylesheet.createThemedStyleSheet({icon:{width:18,height:18,tintColor:b.semanticColors.TEXT_BRAND,marginRight:4},btnIcon:{tintColor:b.semanticColors.TEXT_NORMAL,marginRight:8}});return n.React.createElement(Et,null,n.React.createElement(Pt,null,n.React.createElement(bt,{title:o.format("sheet.import_data.title",{}),trailing:n.React.createElement(Nt,{onPress:function(){return Fe()}})}),!c&&n.React.createElement(n.React.Fragment,null,n.React.createElement(sn,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:8}},n.React.createElement(n.ReactNative.Image,{source:l.getAssetIDByName("ic_info_24px"),style:f.icon,resizeMode:"cover"}),n.React.createElement(te,{variant:"text-md/semibold",color:"TEXT_BRAND",align:"center"},o.format("sheet.import_data.already_synced",{})))),n.React.createElement(Ee,{label:`Unproxied Plugins (${i.unproxiedPlugins})`,disabled:!i.unproxiedPlugins,onPress:function(){return i.unproxiedPlugins&&(!s.unproxiedPlugins&&!t?B.showConfirmationAlert({title:o.format("alert.unproxied_plugin_warn.title",{}),content:o.format("alert.unproxied_plugin_warn.body",{}),isDismissable:!0,confirmText:o.format("alert.unproxied_plugin_warn.confirm",{}),confirmColor:"brand",onConfirm:function(){return ge(ve,{save:r,navigation:a,defOptions:{...s,unproxiedPlugins:!0}})}}):p({...s,unproxiedPlugins:!s.unproxiedPlugins}))},selected:s.unproxiedPlugins}),n.React.createElement(Ee,{label:o.format("sheet.import_data.plugins",{count:i.plugins}),disabled:!i.plugins,onPress:function(){return i.plugins&&p({...s,plugins:!s.plugins})},selected:s.plugins}),n.React.createElement(Ee,{label:o.format("sheet.import_data.themes",{count:i.themes}),disabled:!i.themes,onPress:function(){return i.themes&&p({...s,themes:!s.themes})},selected:s.themes}),n.React.createElement(on,{text:o.format("sheet.import_data.import",{}),variant:"primary",size:"md",iconPosition:"start",icon:l.getAssetIDByName("DownloadIcon"),onPress:function(){Jt(a),Yt(r,s),Fe()},style:{marginHorizontal:16,marginVertical:16},disabled:!s.unproxiedPlugins&&!s.plugins&&!s.themes})))}const _e=d.findByProps("pickSingle","isCancel"),{downloadMediaAsset:cn}=d.findByProps("downloadMediaAsset"),{ScrollView:ln,View:tt}=v.General,{FormRow:w,FormInput:nt,FormSwitchRow:rt}=v.Forms,at=d.findByStoreName("UserStore"),un=A.wrapSync(He(`${T.raw}assets/snd_creepyjingle.ogg`,1.6)),fn=A.wrapSync(He(`${T.raw}assets/snd_mysterygo.ogg`,2.2));function be(){const[e,t]=n.React.useState(!1),[r,a]=n.React.useState([]);A.useProxy(N),A.useProxy(u);const i=function(g){return!r.includes(g)&&a([...r,g])},c=function(g){return a(r.filter(function(h){return g!==h}))};let s=0;const p=n.NavigationNative.useNavigation(),f=!!x(),R=!!N.save;return n.React.createElement(ln,null,n.React.createElement(en,null),n.React.createElement(ne,{title:o.format("settings.current_data.title",{}),icon:l.getAssetIDByName("ic_contact_sync"),padding:!0},n.React.createElement(tt,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginVertical:8}},n.React.createElement(Ze,{count:N.save?.sync?.plugins?.length??"-",subtitle:"settings.current_data.plugins"}),n.React.createElement(Ze,{count:N.save?.sync?.themes?.length??"-",subtitle:"settings.current_data.themes"}))),n.React.createElement(ne,{title:o.format("settings.config.title",{}),icon:l.getAssetIDByName("ic_cog_24px"),onTitlePress:function(){return s>=Date.now()?(e?fn.play():un.play(),t(!e),s=0):s=Date.now()+500}},n.React.createElement(rt,{label:o.format("settings.config.auto_save.title",{}),subLabel:o.format("settings.config.auto_save.description",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_contact_sync")}),onValueChange:function(){return u.autoSync=!u.autoSync},value:u.autoSync}),!Te&&u.autoSync&&n.React.createElement(te,{variant:"text-md/semibold",color:"TEXT_DANGER",style:{marginHorizontal:20,marginVertical:2}},"You must reinstall your client in order to use Auto Save!"),n.React.createElement(rt,{label:o.format("settings.config.settings_pin.title",{}),subLabel:o.format("settings.config.settings_pin.description",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_message_pin")}),onValueChange:function(){return u.addToSettings=!u.addToSettings},value:u.addToSettings}),n.React.createElement(w,{label:o.format("page.plugin_settings.title",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("debug")}),trailing:n.React.createElement(w.Arrow,null),onPress:function(){return p.push("VendettaCustomPage",{render:rn})}}),e&&n.React.createElement(n.React.Fragment,null,n.React.createElement(Ge,{addPadding:!0}),n.React.createElement(w,{label:o.format("settings.dev.api_url.title",{}),subLabel:o.format("settings.dev.api_url.description",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_message_edit")})}),n.React.createElement(nt,{title:"",placeholder:pe,value:T.api,onChange:function(g){return u.host=g||pe},style:{marginTop:-25,marginHorizontal:12}}),n.React.createElement(w,{label:o.format("settings.dev.client_id.title",{}),subLabel:o.format("settings.dev.client_id.description",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_message_edit")})}),n.React.createElement(nt,{title:"",placeholder:he,value:T.oauth2.clientId,onChange:function(g){return u.clientId=g||he},style:{marginTop:-25,marginHorizontal:12}}))),n.React.createElement(ne,{title:o.format("settings.auth.title",{}),icon:l.getAssetIDByName("lock")},x()?n.React.createElement(n.React.Fragment,null,n.React.createElement(w,{label:o.format("settings.auth.log_out.title",{}),subLabel:o.format("settings.auth.log_out.description",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_logout_24px")}),onPress:function(){return B.showConfirmationAlert({title:o.format("alert.log_out.title",{}),content:o.format("alert.log_out.body",{}),confirmColor:"BRAND",onConfirm:function(){delete u.auth[at.getCurrentUser().id],delete N.save,_.showToast(o.format("toast.logout",{}),l.getAssetIDByName("ic_logout_24px"))}})}}),n.React.createElement(w,{label:o.format("settings.auth.delete_data.title",{}),subLabel:o.format("settings.auth.delete_data.description",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("trash")}),onPress:function(){return B.showConfirmationAlert({title:o.format("alert.delete_data.title",{}),content:o.format("alert.delete_data.body",{}),confirmText:o.format("alert.delete_data.confirm",{}),confirmColor:"RED",onConfirm:async function(){await Lt(),delete u.auth[at.getCurrentUser().id],delete N.save,_.showToast(o.format("toast.deleted_data",{}),l.getAssetIDByName("trash"))}})}})):n.React.createElement(w,{label:o.format("settings.auth.authorize",{}),leading:n.React.createElement(w.Icon,{source:l.getAssetIDByName("copy")}),trailing:w.Arrow,onPress:Ht})),n.React.createElement(ne,{title:o.format("settings.data.title",{}),icon:l.getAssetIDByName("ic_message_edit"),padding:!f||!R},f&&R?n.React.createElement(n.React.Fragment,null,n.React.createElement(w,{label:o.format("settings.data.save_data.title",{}),subLabel:o.format("settings.data.save_data.description",{}),leading:r.includes("save_api")?n.React.createElement(n.ReactNative.ActivityIndicator,{size:"small"}):n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_file_upload_24px")}),onPress:function(){return B.showConfirmationAlert({title:o.format("alert.save_data.title",{}),content:o.format("alert.save_data.body",{}),confirmText:o.format("alert.save_data.confirm",{}),confirmColor:"BRAND",onConfirm:async function(){i("save_api");try{N.save=await ze(await We()),_.showToast(o.format("toast.saved_data",{}),l.getAssetIDByName("Check"))}catch(g){_.showToast(String(g),l.getAssetIDByName("Small"))}c("save_api")}})}}),n.React.createElement(w,{label:o.format("sheet.import_data.title",{}),subLabel:o.format("settings.data.import_data.description",{}),leading:r.includes("import_api")?n.React.createElement(n.ReactNative.ActivityIndicator,{size:"small"}):n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_download_24px")}),onPress:function(){ge(ve,{navigation:p}),Ke(function(g){return g?i("import_api"):c("import_api")})}}),n.React.createElement(Ge,{addPadding:!0}),n.React.createElement(w,{label:o.format("settings.data.export_local_data.title",{}),subLabel:o.format("settings.data.export_local_data.description",{}),leading:r.includes("export_local")?n.React.createElement(n.ReactNative.ActivityIndicator,{size:"small"}):n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_file_upload_24px")}),onPress:async function(){B.showInputAlert({title:o.format("alert.encryption_key.title",{}),placeholder:o.format("alert.encryption_key.placeholder",{}),confirmText:o.format("alert.encryption_key.confirm",{}),onConfirm:async function(g){if(!g)throw new Error(o.format("alert.encryption_key.required",{}));if(r.length)return;i("local_export");let h;try{h=await Qt(JSON.stringify(N.save),g)}catch{return c("local_export"),_.showToast(o.format("toast.encrypt_fail",{}),l.getAssetIDByName("Small"))}if(E.hasRNFS){const y=`CloudSync_${Math.floor(Math.random()*1e4)}.txt`;E.writeFile(E.DownloadDirectoryPath+`/${y}`,h),_.showToast(o.format("toast.backup_saved",{file:y}),l.getAssetIDByName("ic_file_small_document"))}else{_.showToast(o.format("toast.backup_download_prepare",{}),l.getAssetIDByName("ic_upload"));let y;try{y=await Gt(h)}catch(m){return c("local_export"),_.showToast(m?.message??`${m}`,l.getAssetIDByName("Small"))}_.showToast(o.format("toast.backup_saved",{file:y.key}),l.getAssetIDByName("ic_file_small_document")),cn(`https://hst.sh/raw/${y.key}.txt`,3)}c("local_export")}})}}),n.React.createElement(w,{label:o.format("settings.data.import_local_data.title",{}),subLabel:o.format("settings.data.import_local_data.description",{}),leading:r.includes("import_local")?n.React.createElement(n.ReactNative.ActivityIndicator,{size:"small"}):n.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_download_24px")}),onPress:async function(){if(r.length)return;i("import_local");let g;try{const{fileCopyUri:h,type:y}=await _e.pickSingle({type:_e.types.plainText,mode:"open",copyTo:"cachesDirectory"});(y==="text/plain"||!h)&&(g=await E.readFile(h.slice(5),"utf8"))}catch(h){_e.isCancel(h)||_.showToast(o.format("toast.errored",{error:h}),l.getAssetIDByName("Small"))}c("import_local"),g&&B.showInputAlert({title:o.format("alert.decryption_key.title",{}),placeholder:o.format("alert.decryption_key.placeholder",{}),confirmText:o.format("alert.decryption_key.confirm",{}),onConfirm:async function(h){if(!h)throw new Error(o.format("alert.decryption_key.required",{}));if(!r.length){i("import_local");try{const y=JSON.parse(await Zt(g,h));ge(ve,{save:y,navigation:p}),c("import_local"),Ke(function(m){return m?i("import_local"):c("import_local")})}catch{return c("import_local"),_.showToast(o.format("toast.decrypt_fail",{}),l.getAssetIDByName("Small"))}}}})}})):f?n.React.createElement(n.ReactNative.ActivityIndicator,{size:"small",style:{flex:1}}):n.React.createElement(te,{variant:"text-md/semibold",color:"TEXT_NORMAL",align:"center"},o.format("settings.label.auth_needed",{}))),n.React.createElement(tt,{style:{height:12}}))}let it=0;function dn(e){clearTimeout(it),it=setTimeout(e,1500)}const{FormSection:gn}=v.Forms,pn=d.findByName("getScreens"),hn=d.findByName("UserSettingsOverviewWrapper",!1),yn=n.stylesheet.createThemedStyleSheet({container:{flex:1,backgroundColor:b.semanticColors.BACKGROUND_MOBILE_PRIMARY}});function mn(e,t,r){const a=[],i=L.after("default",hn,function(c,s){i();const p=ce.findInReactTree(s.props.children,function(f){return f.type&&f.type.name==="UserSettingsOverview"});a.push(L.after("render",p.type.prototype,function(f,R){let{props:{children:g}}=R;const h=[n.i18n.Messages.BILLING_SETTINGS,n.i18n.Messages.PREMIUM_SETTINGS];g=ce.findInReactTree(g,function(m){return m.children[1].type===gn}).children;const y=g.findIndex(function(m){return h.includes(m?.props.label)});e()&&g.splice(y===-1?4:y,0,t({}))}))},!0);if(a.push(i),pn&&r){const c=`${n.lodash.snakeCase(j()).toUpperCase()}_PLUGIN_${n.lodash.snakeCase(r.key).toUpperCase()}`,s=r.page.render,p=n.React.memo(function(h){let{navigation:y}=h;const m=y.addListener("focus",function(){m(),y.setOptions(ce.without(r.page,"noErrorBoundary","render"))});return n.React.createElement(n.ReactNative.View,{style:yn.container},r.page.noErrorBoundary?n.React.createElement(s,null):n.React.createElement(v.ErrorBoundary,null,n.React.createElement(s,null)))}),f={[c]:{type:"route",title:function(){return r.title},icon:r.icon,parent:null,screen:{route:`${j()}Plugin${n.lodash.chain(r.key).camelCase().upperFirst().value()}`,getComponent:function(){return p}}}},R=function(h,y){const m=[...h],C=y?m?.[0]?.sections:m;if(!Array.isArray(C))return C;const k=j(),F=C.find(function(U){return U?.title===k||U?.label===k});return F&&!F?.settings?.includes(c)&&F.settings.push(c),m},g=function(){const h=d.findByProps("useOverviewSettings"),y=d.findByProps("getSettingTitleConfig"),m=d.findByProps("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),C="getSettingSearchListItems",k="getSettingListItems",F=d.findByProps(C),U=F?C:k,st=F??d.findByProps(k);if(!st||!h)return!1;a.push(L.after("useOverviewSettings",h,function(De,Q){return R(Q)})),a.push(L.after("getSettingTitleConfig",y,function(De,Q){return{...Q,[c]:r.title}})),a.push(L.after(U,st,function(De,Q){let[vn]=De;return[...vn.includes(c)?[{type:"setting_search_result",ancestorRendererData:f[c],setting:c,title:function(){return r.title},breadcrumbs:[j()],icon:f[c].icon}]:[],...Q]}));const Ie=m.SETTING_RELATIONSHIPS,En=m.SETTING_RENDERER_CONFIGS;return m.SETTING_RELATIONSHIPS={...Ie,[c]:null},m.SETTING_RENDERER_CONFIGS={...En,...f},a.push(function(){m.SETTING_RELATIONSHIPS=Ie,m.SETTING_RENDERER_CONFIGS=Ie}),!0};(function(){const h=d.findByProps("SearchableSettingsList"),y=d.findByProps("SETTING_RENDERER_CONFIG"),m=d.findByProps("getSettingListItems");if(!m||!h||!y)return!1;a.push(L.before("type",h.SearchableSettingsList,function(k){return R(k,!0)})),a.push(L.after("getSettingListSearchResultItems",m,function(k,F){for(const U of F)U.setting===c&&(U.breadcrumbs=[j()])}));const C=y.SETTING_RENDERER_CONFIG;return y.SETTING_RENDERER_CONFIG={...C,...f},a.push(function(){y.SETTING_RENDERER_CONFIG=C}),!0})()||g()}return function(){return a.forEach(function(c){return c()})}}const{FormRow:Ne}=v.Forms;function Rn(){const e=n.NavigationNative.useNavigation();return React.createElement(v.ErrorBoundary,null,React.createElement(Ne,{label:o.format("plugin.name",{}),leading:React.createElement(Ne.Icon,{source:l.getAssetIDByName("ic_contact_sync")}),trailing:Ne.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:o.format("plugin.name",{}),render:be})}}))}function wn(){const e=[];return e.push(mn(function(){return u.addToSettings},function(){return React.createElement(Rn,null)},{key:M.plugin.manifest.name,icon:l.getAssetIDByName("ic_contact_sync"),title:o.format("plugin.name",{}),page:{title:o.format("plugin.name",{}),render:be}})),function(){return e.forEach(function(t){return t()})}}const u=se.storage;let ot;const N=A.wrapSync(A.createStorage({get:function(){return ot},set:function(e){ot=e}})),Pe=async function(){return Mt().then(function(e){return N.save=e})};function Y(e){return ct().some(function(t){return e.startsWith(t)})}function q(e){return!e.includes("cloud-sync")}const $=async function(){if(!u.autoSync)return;const e=await We();JSON.stringify(N.save)!==JSON.stringify(e)&&dn(async function(){return N.save=await ze(e)})},oe=Symbol.for("vendetta.storage.emitter"),Te=!!D.plugins[oe]&&!!O.themes[oe],o=new mt("cloud_sync"),Ce=[];var Sn={onLoad:function(){if(u.autoSync??(u.autoSync=!1),u.addToSettings??(u.addToSettings=!1),u.pluginSettings??(u.pluginSettings={}),u.auth??(u.auth={}),Rt(),x()&&Pe(),Te){const e={plugins:D.plugins[oe],themes:O.themes[oe]};e.plugins.on("SET",$),e.themes.on("SET",$),e.plugins.on("DEL",$),e.themes.on("DEL",$),Ce.push(function(){e.plugins.off("SET",$),e.themes.off("SET",$),e.plugins.off("DEL",$),e.themes.off("DEL",$)})}Ce.push(wn()),se.storage.databaseMigrate&&delete se.storage.databaseMigrate},onUnload:function(){return Ce.forEach(function(e){return e()})},settings:be};return I.cache=N,I.canImport=q,I.default=Sn,I.emitterAvailable=Te,I.fillCache=Pe,I.isPluginProxied=Y,I.lang=o,I.vstorage=u,Object.defineProperty(I,"__esModule",{value:!0}),I})({},vendetta.plugin,vendetta.plugins,vendetta.storage,vendetta.themes,vendetta,vendetta.metro.common,vendetta.metro,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts,vendetta.ui,vendetta.patcher,vendetta.utils);
